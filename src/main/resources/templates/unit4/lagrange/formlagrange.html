<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Lagrange</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<script th:inline="javascript">
function crearPuntos() {
  const orden = parseInt(document.getElementById('orden').value || "0");
  if (![1,2,3,4].includes(orden)) { alert("El orden debe ser 1, 2, 3 o 4"); return; }
  const n = orden + 1;

  const X = document.getElementById('xs'); X.replaceChildren();
  const Y = document.getElementById('ys'); Y.replaceChildren();

  for (let i = 0; i < n; i++) {
    let rx = document.createElement('div'); rx.className = "mb-2"; X.appendChild(rx);
    let ix = document.createElement('input');
    ix.type = "number"; ix.step = "any"; ix.name = "xs[]";
    ix.placeholder = "x" + i; ix.className = "form-control";
    rx.appendChild(ix);

    let ry = document.createElement('div'); ry.className = "mb-2"; Y.appendChild(ry);
    let iy = document.createElement('input');
    iy.type = "number"; iy.step = "any"; iy.name = "ys[]";
    iy.placeholder = "f(x" + i + ")"; iy.className = "form-control";
    ry.appendChild(iy);
  }
  document.getElementById('resolver').style.display = 'block';
}
</script>

<body>
<div class="container py-3">
  <nav th:replace="/layout/template :: menu"></nav>
  <div th:replace="/layout/template :: bannerunit4"></div>

  <nav aria-label="breadcrumb" class="mt-2">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a th:href="@{/}">Inicio</a></li>
      <li class="breadcrumb-item"><a th:href="@{/unit4}">Ajuste de Curvas</a></li>
      <li class="breadcrumb-item active" aria-current="page">Lagrange</li>
    </ol>
  </nav>

  <form class="row g-3" th:action="@{/unit4/solvelagrange}" method="post" th:object="${modelLagrange}">
    <div class="col-md-2">
      <label class="form-label" for="orden">Orden</label>
      <input type="number" min="1" max="4" class="form-control" id="orden" name="orden">
    </div>
    <div class="col-md-3">
      <label class="form-label" for="xEval">x*</label>
      <input type="number" step="any" class="form-control" id="xEval" name="xEval">
    </div>
    <div class="col-12">
      <button type="button" class="btn btn-secondary" onclick="crearPuntos()">Crear puntos</button>
    </div>

    <div class="row mt-2">
      <div class="col-md-6">
        <h5>Puntos x</h5>
        <div id="xs"></div>
      </div>
      <div class="col-md-6">
        <h5>Valores f(x)</h5>
        <div id="ys"></div>
      </div>
    </div>

    <div id="resolver" class="col-12 mt-3" style="display:none;">
      <button type="submit" class="btn btn-primary">Calcular</button>
    </div>
  </form>
</div>
</body>
</html>
